{% extends "base.html" %}
{% block content %}
<div class="max-w-6xl mx-auto space-y-8">
    <!-- Header -->
    <div class="text-center mb-8">
        <h2 class="text-4xl font-bold gradient-text mb-4">ğŸ¤– AI Personal Analysis Report</h2>
        <p class="text-xl text-gray-600">Comprehensive analysis of your English learning journey</p>
        <p class="text-sm text-gray-500 mt-2">Generated by AI based on your conversations, quizzes, and progress patterns</p>
    </div>

    <!-- Language Toggle -->
    <div class="flex justify-center mb-6">
        <div class="flex items-center bg-white rounded-lg shadow-md p-2">
            <button onclick="toggleLanguage('en')" 
                    id="btn-en" 
                    class="px-4 py-2 rounded-md text-sm font-medium transition-all duration-200 bg-blue-500 text-white">
                ğŸ‡ºğŸ‡¸ English
            </button>
            <button onclick="toggleLanguage('es')" 
                    id="btn-es" 
                    class="px-4 py-2 rounded-md text-sm font-medium transition-all duration-200 text-gray-600 hover:bg-gray-100">
                ğŸ‡ªğŸ‡¸ EspaÃ±ol
            </button>
        </div>
    </div>

    <!-- Overall Assessment -->
    <div class="bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-xl shadow-xl p-8 mb-8">
        <div class="flex items-center mb-4">
            <span class="text-4xl mr-4">ğŸ“Š</span>
            <div>
                <h3 class="text-2xl font-bold" data-translate="overall-assessment">Overall Assessment</h3>
                <p class="text-blue-200 text-sm" data-translate="ai-analysis">AI Analysis of Your Progress</p>
            </div>
        </div>
        <div class="bg-white bg-opacity-10 rounded-lg p-6">
            <div class="text-lg leading-relaxed" id="overall-assessment-text">
                {{ report.overall_assessment }}
            </div>
            <div class="text-blue-200 text-sm mt-3 hidden italic" id="overall-assessment-text-es">
                <!-- Spanish translation will appear here -->
            </div>
            <button onclick="translateText('overall-assessment-text', '{{ report.overall_assessment.replace("'", "\\'") }}', 'en', 'es')" 
                    class="mt-4 bg-white bg-opacity-20 text-white px-4 py-2 rounded-lg hover:bg-opacity-30 transition text-sm">
                ğŸŒ <span data-translate="translate-btn">Translate</span>
            </button>
        </div>
    </div>

    <!-- Main Report Grid -->
    <div class="grid lg:grid-cols-2 gap-8">
        <!-- Strengths -->
        <div class="bg-white rounded-xl shadow-lg p-6 border-l-4 border-green-500">
            <div class="flex items-center mb-4">
                <span class="text-3xl mr-3">ğŸ’ª</span>
                <h3 class="text-xl font-bold text-green-700" data-translate="strengths-title">Your Strengths</h3>
            </div>
            <div class="space-y-3">
                {% for strength in report.strengths %}
                <div class="bg-green-50 p-4 rounded-lg border border-green-200">
                    <div class="flex items-start justify-between">
                        <div class="flex-1">
                            <div class="text-green-800" id="strength-{{ loop.index0 }}">
                                <span class="font-medium">âœ…</span> {{ strength }}
                            </div>
                            <div class="text-green-600 text-sm mt-2 hidden italic" id="strength-{{ loop.index0 }}-es">
                                <!-- Spanish translation will appear here -->
                            </div>
                        </div>
                        <button onclick="translateText('strength-{{ loop.index0 }}', '{{ strength.replace("'", "\\'") }}', 'en', 'es')" 
                                class="ml-2 text-xs bg-green-100 text-green-700 px-2 py-1 rounded hover:bg-green-200 transition">
                            ğŸŒ
                        </button>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>

        <!-- Areas for Improvement -->
        <div class="bg-white rounded-xl shadow-lg p-6 border-l-4 border-red-500">
            <div class="flex items-center mb-4">
                <span class="text-3xl mr-3">ğŸ¯</span>
                <h3 class="text-xl font-bold text-red-700" data-translate="improvement-areas-title">Areas for Improvement</h3>
            </div>
            <div class="space-y-3">
                {% for weakness in report.weaknesses %}
                <div class="bg-red-50 p-4 rounded-lg border border-red-200">
                    <div class="flex items-start justify-between">
                        <div class="flex-1">
                            <div class="text-red-800" id="weakness-{{ loop.index0 }}">
                                <span class="font-medium">ğŸ”§</span> {{ weakness }}
                            </div>
                            <div class="text-red-600 text-sm mt-2 hidden italic" id="weakness-{{ loop.index0 }}-es">
                                <!-- Spanish translation will appear here -->
                            </div>
                        </div>
                        <button onclick="translateText('weakness-{{ loop.index0 }}', '{{ weakness.replace("'", "\\'") }}', 'en', 'es')" 
                                class="ml-2 text-xs bg-red-100 text-red-700 px-2 py-1 rounded hover:bg-red-200 transition">
                            ğŸŒ
                        </button>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>

    <!-- Grammar Analysis -->
    <div class="grid lg:grid-cols-2 gap-8">
        <!-- Grammar Mastered -->
        <div class="bg-white rounded-xl shadow-lg p-6">
            <div class="flex items-center mb-4">
                <span class="text-3xl mr-3">ğŸ†</span>
                <h3 class="text-xl font-bold text-blue-700" data-translate="grammar-mastered-title">Grammar Topics Mastered</h3>
            </div>
            {% if report.grammar_mastered %}
            <div class="space-y-2">
                {% for topic in report.grammar_mastered %}
                <div class="flex items-center p-3 bg-blue-50 rounded-lg border border-blue-200">
                    <span class="text-blue-600 mr-3">âœ¨</span>
                    <div class="flex-1">
                        <span class="text-blue-800 font-medium" id="mastered-{{ loop.index0 }}">{{ topic }}</span>
                        <div class="text-blue-600 text-sm mt-1 hidden italic" id="mastered-{{ loop.index0 }}-es">
                            <!-- Spanish translation will appear here -->
                        </div>
                    </div>
                    <button onclick="translateText('mastered-{{ loop.index0 }}', '{{ topic.replace("'", "\\'") }}', 'en', 'es')" 
                            class="text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded hover:bg-blue-200 transition">
                        ğŸŒ
                    </button>
                </div>
                {% endfor %}
            </div>
            {% else %}
            <div class="text-center py-8 text-gray-500">
                <span class="text-4xl mb-2 block">ğŸ“š</span>
                <p data-translate="no-mastered-grammar">Keep practicing to identify your strong grammar areas!</p>
            </div>
            {% endif %}
        </div>

        <!-- Grammar Needs Work -->
        <div class="bg-white rounded-xl shadow-lg p-6">
            <div class="flex items-center mb-4">
                <span class="text-3xl mr-3">ğŸ“</span>
                <h3 class="text-xl font-bold text-orange-700" data-translate="grammar-needs-work-title">Grammar Areas Needing Practice</h3>
            </div>
            {% if report.grammar_needs_work %}
            <div class="space-y-2">
                {% for topic in report.grammar_needs_work %}
                <div class="flex items-center p-3 bg-orange-50 rounded-lg border border-orange-200">
                    <span class="text-orange-600 mr-3">ğŸ¯</span>
                    <div class="flex-1">
                        <span class="text-orange-800 font-medium" id="needs-work-{{ loop.index0 }}">{{ topic }}</span>
                        <div class="text-orange-600 text-sm mt-1 hidden italic" id="needs-work-{{ loop.index0 }}-es">
                            <!-- Spanish translation will appear here -->
                        </div>
                    </div>
                    <div class="flex space-x-2">
                        <button onclick="translateText('needs-work-{{ loop.index0 }}', '{{ topic.replace("'", "\\'") }}', 'en', 'es')" 
                                class="text-xs bg-orange-100 text-orange-700 px-2 py-1 rounded hover:bg-orange-200 transition">
                            ğŸŒ
                        </button>
                        <a href="/quiz" class="text-xs bg-orange-500 text-white px-2 py-1 rounded hover:bg-orange-600 transition">
                            <span data-translate="practice-btn">Practice</span>
                        </a>
                    </div>
                </div>
                {% endfor %}
            </div>
            {% else %}
            <div class="text-center py-8 text-gray-500">
                <span class="text-4xl mb-2 block">ğŸ‰</span>
                <p data-translate="no-grammar-issues">Great! No major grammar issues identified.</p>
            </div>
            {% endif %}
        </div>
    </div>

    <!-- Focus Areas -->
    <div class="bg-white rounded-xl shadow-lg p-6">
        <div class="flex items-center mb-6">
            <span class="text-3xl mr-3">ğŸš€</span>
            <h3 class="text-2xl font-bold text-purple-700" data-translate="focus-areas-title">Priority Focus Areas</h3>
        </div>
        <div class="grid md:grid-cols-3 gap-4">
            {% for area in report.focus_areas %}
            <div class="bg-gradient-to-br from-purple-50 to-pink-50 p-4 rounded-lg border border-purple-200 transform hover:scale-105 transition-transform">
                <div class="text-center">
                    <span class="text-2xl mb-2 block">{{ loop.index }}ï¸âƒ£</span>
                    <div class="text-purple-800 font-medium" id="focus-{{ loop.index0 }}">{{ area }}</div>
                    <div class="text-purple-600 text-sm mt-2 hidden italic" id="focus-{{ loop.index0 }}-es">
                        <!-- Spanish translation will appear here -->
                    </div>
                    <div class="mt-3 flex justify-center space-x-2">
                        <button onclick="translateText('focus-{{ loop.index0 }}', '{{ area.replace("'", "\\'") }}', 'en', 'es')" 
                                class="text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded hover:bg-purple-200 transition">
                            ğŸŒ
                        </button>
                        {% if 'quiz' in area.lower() or 'grammar' in area.lower() %}
                        <a href="/quiz" class="text-xs bg-purple-500 text-white px-2 py-1 rounded hover:bg-purple-600 transition">
                            ğŸ“
                        </a>
                        {% else %}
                        <a href="/" class="text-xs bg-purple-500 text-white px-2 py-1 rounded hover:bg-purple-600 transition">
                            ğŸ’¬
                        </a>
                        {% endif %}
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>

    <!-- Recommendations -->
    <div class="bg-white rounded-xl shadow-lg p-6">
        <div class="flex items-center mb-6">
            <span class="text-3xl mr-3">ğŸ’¡</span>
            <h3 class="text-2xl font-bold text-indigo-700" data-translate="recommendations-title">AI Recommendations</h3>
        </div>
        <div class="space-y-4">
            {% for recommendation in report.recommendations %}
            <div class="bg-indigo-50 p-4 rounded-lg border-l-4 border-indigo-500">
                <div class="flex items-start justify-between">
                    <div class="flex-1">
                        <div class="flex items-center mb-2">
                            <span class="text-indigo-600 font-bold mr-2">{{ loop.index }}.</span>
                            <span class="text-indigo-800 font-medium" id="rec-{{ loop.index0 }}">{{ recommendation }}</span>
                        </div>
                        <div class="text-indigo-600 text-sm mt-2 hidden italic ml-6" id="rec-{{ loop.index0 }}-es">
                            <!-- Spanish translation will appear here -->
                        </div>
                    </div>
                    <button onclick="translateText('rec-{{ loop.index0 }}', '{{ recommendation.replace("'", "\\'") }}', 'en', 'es')" 
                            class="ml-4 text-xs bg-indigo-100 text-indigo-700 px-2 py-1 rounded hover:bg-indigo-200 transition">
                        ğŸŒ
                    </button>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>

    <!-- Learning Path -->
    <div class="bg-white rounded-xl shadow-lg p-6">
        <div class="flex items-center mb-6">
            <span class="text-3xl mr-3">ğŸ—ºï¸</span>
            <h3 class="text-2xl font-bold text-green-700" data-translate="learning-path-title">Your Personalized Learning Path</h3>
        </div>
        <div class="relative">
            <!-- Timeline Line -->
            <div class="absolute left-8 top-0 bottom-0 w-0.5 bg-green-300"></div>
            
            <div class="space-y-6">
                {% for step in report.learning_path %}
                <div class="relative flex items-start">
                    <!-- Timeline Dot -->
                    <div class="flex-shrink-0 w-16 h-16 bg-green-500 rounded-full flex items-center justify-center text-white font-bold text-lg z-10">
                        {{ loop.index }}
                    </div>
                    
                    <!-- Content -->
                    <div class="ml-6 flex-1 bg-green-50 p-4 rounded-lg border border-green-200">
                        <div class="flex items-start justify-between">
                            <div class="flex-1">
                                <div class="text-green-800 font-medium" id="path-{{ loop.index0 }}">{{ step }}</div>
                                <div class="text-green-600 text-sm mt-2 hidden italic" id="path-{{ loop.index0 }}-es">
                                    <!-- Spanish translation will appear here -->
                                </div>
                            </div>
                            <button onclick="translateText('path-{{ loop.index0 }}', '{{ step.replace("'", "\\'") }}', 'en', 'es')" 
                                    class="ml-4 text-xs bg-green-100 text-green-700 px-2 py-1 rounded hover:bg-green-200 transition">
                                ğŸŒ
                            </button>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>

    <!-- Personality Insights -->
    {% if report.personality_insights %}
    <div class="bg-white rounded-xl shadow-lg p-6">
        <div class="flex items-center mb-6">
            <span class="text-3xl mr-3">ğŸ§ </span>
            <h3 class="text-2xl font-bold text-pink-700" data-translate="personality-insights-title">Learning Style Insights</h3>
        </div>
        <div class="grid md:grid-cols-2 gap-4">
            {% for insight in report.personality_insights %}
            <div class="bg-gradient-to-br from-pink-50 to-rose-50 p-4 rounded-lg border border-pink-200">
                <div class="flex items-start justify-between">
                    <div class="flex-1">
                        <div class="text-pink-800" id="insight-{{ loop.index0 }}">
                            <span class="text-pink-600 mr-2">ğŸ¨</span>{{ insight }}
                        </div>
                        <div class="text-pink-600 text-sm mt-2 hidden italic" id="insight-{{ loop.index0 }}-es">
                            <!-- Spanish translation will appear here -->
                        </div>
                    </div>
                    <button onclick="translateText('insight-{{ loop.index0 }}', '{{ insight.replace("'", "\\'") }}', 'en', 'es')" 
                            class="ml-2 text-xs bg-pink-100 text-pink-700 px-2 py-1 rounded hover:bg-pink-200 transition">
                        ğŸŒ
                    </button>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
    {% endif %}

    <!-- Action Buttons -->
    <div class="bg-gradient-to-r from-gray-800 to-gray-900 rounded-xl shadow-xl p-8 text-white">
        <div class="text-center mb-6">
            <h3 class="text-2xl font-bold mb-2" data-translate="ready-to-improve">Ready to Improve?</h3>
            <p class="text-gray-300" data-translate="take-action-text">Put these insights into action and accelerate your learning!</p>
        </div>
        
        <div class="grid md:grid-cols-4 gap-4">
            <a href="/chat?scenario=daily_standup" 
               class="bg-blue-600 hover:bg-blue-700 text-white p-4 rounded-lg text-center transition-colors group">
                <div class="text-2xl mb-2 group-hover:scale-110 transition-transform">ğŸ’¬</div>
                <div class="font-medium" data-translate="practice-conversations">Practice Conversations</div>
            </a>
            
            <a href="/quiz" 
               class="bg-purple-600 hover:bg-purple-700 text-white p-4 rounded-lg text-center transition-colors group">
                <div class="text-2xl mb-2 group-hover:scale-110 transition-transform">ğŸ“</div>
                <div class="font-medium" data-translate="take-quiz">Take Grammar Quiz</div>
            </a>
            
            <a href="/vocabulary" 
               class="bg-green-600 hover:bg-green-700 text-white p-4 rounded-lg text-center transition-colors group">
                <div class="text-2xl mb-2 group-hover:scale-110 transition-transform">ğŸ“š</div>
                <div class="font-medium" data-translate="build-vocabulary">Build Vocabulary</div>
            </a>
            
            <a href="/analytics" 
               class="bg-orange-600 hover:bg-orange-700 text-white p-4 rounded-lg text-center transition-colors group">
                <div class="text-2xl mb-2 group-hover:scale-110 transition-transform">ğŸ“Š</div>
                <div class="font-medium" data-translate="view-analytics">View Analytics</div>
            </a>
        </div>
        
        <div class="mt-6 text-center">
            <button onclick="location.reload()" 
                    class="bg-gray-700 hover:bg-gray-600 text-white px-6 py-3 rounded-lg font-medium transition-colors">
                ğŸ”„ <span data-translate="regenerate-report">Regenerate Report</span>
            </button>
        </div>
    </div>
</div>

<script>
let currentLanguage = 'en';
const translationCache = new Map();

const translations = {
    'en': {
        'overall-assessment': 'Overall Assessment',
        'ai-analysis': 'AI Analysis of Your Progress',
        'translate-btn': 'Translate',
        'strengths-title': 'Your Strengths',
        'improvement-areas-title': 'Areas for Improvement',
        'grammar-mastered-title': 'Grammar Topics Mastered',
        'grammar-needs-work-title': 'Grammar Areas Needing Practice',
        'no-mastered-grammar': 'Keep practicing to identify your strong grammar areas!',
        'no-grammar-issues': 'Great! No major grammar issues identified.',
        'focus-areas-title': 'Priority Focus Areas',
        'recommendations-title': 'AI Recommendations',
        'learning-path-title': 'Your Personalized Learning Path',
        'personality-insights-title': 'Learning Style Insights',
        'ready-to-improve': 'Ready to Improve?',
        'take-action-text': 'Put these insights into action and accelerate your learning!',
        'practice-conversations': 'Practice Conversations',
        'take-quiz': 'Take Grammar Quiz',
        'build-vocabulary': 'Build Vocabulary',
        'view-analytics': 'View Analytics',
        'regenerate-report': 'Regenerate Report',
        'practice-btn': 'Practice'
    },
    'es': {
        'overall-assessment': 'EvaluaciÃ³n General',
        'ai-analysis': 'AnÃ¡lisis de IA de tu Progreso',
        'translate-btn': 'Traducir',
        'strengths-title': 'Tus Fortalezas',
        'improvement-areas-title': 'Ãreas de Mejora',
        'grammar-mastered-title': 'Temas Gramaticales Dominados',
        'grammar-needs-work-title': 'Ãreas Gramaticales que Necesitan PrÃ¡ctica',
        'no-mastered-grammar': 'Â¡Sigue practicando para identificar tus Ã¡reas gramaticales fuertes!',
        'no-grammar-issues': 'Â¡Excelente! No se identificaron problemas gramaticales mayores.',
        'focus-areas-title': 'Ãreas de Enfoque Prioritarias',
        'recommendations-title': 'Recomendaciones de IA',
        'learning-path-title': 'Tu Ruta de Aprendizaje Personalizada',
        'personality-insights-title': 'Insights de Estilo de Aprendizaje',
        'ready-to-improve': 'Â¿Listo para Mejorar?',
        'take-action-text': 'Â¡Pon estos insights en acciÃ³n y acelera tu aprendizaje!',
        'practice-conversations': 'Practicar Conversaciones',
        'take-quiz': 'Tomar Quiz de GramÃ¡tica',
        'build-vocabulary': 'Construir Vocabulario',
        'view-analytics': 'Ver AnalÃ­ticas',
        'regenerate-report': 'Regenerar Reporte',
        'practice-btn': 'Practicar'
    }
};

function toggleLanguage(lang) {
    currentLanguage = lang;
    
    // Update button states
    const btnEn = document.getElementById('btn-en');
    const btnEs = document.getElementById('btn-es');
    
    if (lang === 'en') {
        btnEn.className = 'px-4 py-2 rounded-md text-sm font-medium transition-all duration-200 bg-blue-500 text-white';
        btnEs.className = 'px-4 py-2 rounded-md text-sm font-medium transition-all duration-200 text-gray-600 hover:bg-gray-100';
    } else {
        btnEs.className = 'px-4 py-2 rounded-md text-sm font-medium transition-all duration-200 bg-blue-500 text-white';
        btnEn.className = 'px-4 py-2 rounded-md text-sm font-medium transition-all duration-200 text-gray-600 hover:bg-gray-100';
    }
    
    // Translate all elements
    translateAllElements();
}

function translateAllElements() {
    const elements = document.querySelectorAll('[data-translate]');
    elements.forEach(element => {
        const key = element.getAttribute('data-translate');
        if (translations[currentLanguage] && translations[currentLanguage][key]) {
            element.textContent = translations[currentLanguage][key];
        }
    });
}

// Enhanced translation function
async function translateText(elementId, text, fromLang, toLang) {
    const button = event.target;
    const translationElement = document.getElementById(`${elementId}-${toLang}`);
    
    // Check if already translated
    if (!translationElement.classList.contains('hidden')) {
        // Toggle hide/show
        translationElement.classList.add('hidden');
        button.textContent = 'ğŸŒ';
        return;
    }
    
    // Check cache first
    const cacheKey = `${text}-${fromLang}-${toLang}`;
    if (translationCache.has(cacheKey)) {
        const cachedTranslation = translationCache.get(cacheKey);
        translationElement.innerHTML = `ğŸ‡ªğŸ‡¸ ${cachedTranslation}`;
        translationElement.classList.remove('hidden');
        button.textContent = 'ğŸ‘ï¸';
        return;
    }
    
    // Show loading state
    const originalText = button.textContent;
    button.textContent = 'ğŸ”„';
    button.disabled = true;
    
    try {
        const response = await fetch(`https://api.mymemory.translated.net/get?q=${encodeURIComponent(text)}&langpair=${fromLang}|${toLang}`);
        const data = await response.json();
        
        if (data.responseStatus === 200) {
            const translatedText = data.responseData.translatedText;
            
            // Cache the result
            translationCache.set(cacheKey, translatedText);
            
            // Show translation
            translationElement.innerHTML = `ğŸ‡ªğŸ‡¸ ${translatedText}`;
            translationElement.classList.remove('hidden');
            
            button.textContent = 'ğŸ‘ï¸';
        } else {
            throw new Error('Translation service failed');
        }
    } catch (error) {
        console.error('Translation error:', error);
        
        // Fallback translation
        const fallbackTranslation = getFallbackTranslation(text, fromLang, toLang);
        translationElement.innerHTML = `ğŸ‡ªğŸ‡¸ ${fallbackTranslation} <span class="text-xs opacity-75">(traducciÃ³n bÃ¡sica)</span>`;
        translationElement.classList.remove('hidden');
        
        button.textContent = 'âš ï¸';
    }
    
    button.disabled = false;
}

// Enhanced fallback dictionary for AI report terms
function getFallbackTranslation(text, fromLang, toLang) {
    if (fromLang === 'en' && toLang === 'es') {
        const translations = {
            // Grammar terms
            'grammar': 'gramÃ¡tica',
            'vocabulary': 'vocabulario',
            'pronunciation': 'pronunciaciÃ³n',
            'sentence structure': 'estructura de oraciÃ³n',
            'verb tense': 'tiempo verbal',
            'passive voice': 'voz pasiva',
            'active voice': 'voz activa',
            'conditional': 'condicional',
            'subjunctive': 'subjuntivo',
            'gerund': 'gerundio',
            'infinitive': 'infinitivo',
            'participle': 'participio',
            
            // Learning terms
            'strengths': 'fortalezas',
            'weaknesses': 'debilidades',
            'improvement': 'mejora',
            'practice': 'prÃ¡ctica',
            'fluency': 'fluidez',
            'confidence': 'confianza',
            'communication': 'comunicaciÃ³n',
            'proficiency': 'competencia',
            'mastery': 'dominio',
            
            // Technical terms
            'debugging': 'depuraciÃ³n',
            'deployment': 'despliegue',
            'architecture': 'arquitectura',
            'standup': 'reuniÃ³n de pie',
            'code review': 'revisiÃ³n de cÃ³digo',
            'technical interview': 'entrevista tÃ©cnica',
            
            // Common phrases
            'focus on': 'enfocarse en',
            'work on': 'trabajar en',
            'improve your': 'mejora tu',
            'practice more': 'practica mÃ¡s',
            'keep practicing': 'sigue practicando',
            'you excel at': 'sobresales en',
            'you struggle with': 'tienes dificultades con',
            'recommended': 'recomendado',
            'priority': 'prioridad',
            'next steps': 'prÃ³ximos pasos'
        };
        
        let result = text.toLowerCase();
        Object.entries(translations).forEach(([english, spanish]) => {
            const regex = new RegExp(`\\b${english}\\b`, 'gi');
            result = result.replace(regex, spanish);
        });
        
        return result;
    }
    
    return text;
}

// Initialize page animations
document.addEventListener('DOMContentLoaded', function() {
    // Add entrance animations
    const sections = document.querySelectorAll('.bg-white, .bg-gradient-to-r');
    sections.forEach((section, index) => {
        section.style.opacity = '0';
        section.style.transform = 'translateY(20px)';
        setTimeout(() => {
            section.style.transition = 'all 0.6s ease-out';
            section.style.opacity = '1';
            section.style.transform = 'translateY(0)';
        }, index * 150);
    });
});

// Add custom styles
const style = document.createElement('style');
style.textContent = `
    .gradient-text {
        background: linear-gradient(45deg, #3b82f6, #8b5cf6);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }
    
    .hover\\:scale-105:hover {
        transform: scale(1.05);
    }
    
    .transition-transform {
        transition: transform 0.2s ease-in-out;
    }
    
    .transition-colors {
        transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out;
    }
    
    .group:hover .group-hover\\:scale-110 {
        transform: scale(1.1);
    }
    
    button:hover {
        transform: translateY(-1px);
    }
`;
document.head.appendChild(style);
</script>

{% endblock %}